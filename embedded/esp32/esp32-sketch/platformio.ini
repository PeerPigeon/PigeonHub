[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Required libraries
lib_deps = 
    links2004/WebSockets@^2.4.1
    wasm3/Wasm3@^0.5.0

; Build flags
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    
; Increase partition size for WASM
board_build.partitions = huge_app.csv

; Upload settings
upload_port = /dev/cu.usbmodem21101
monitor_port = /dev/cu.usbmodem21101
monitor_filters = esp32_exception_decoder

[env:esp32-s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600

lib_deps = 
    links2004/WebSockets@^2.4.1
    wasm3/Wasm3@^0.5.0

build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    
board_build.partitions = huge_app.csv
upload_port = /dev/cu.usbserial-*
monitor_port = /dev/cu.usbserial-*
monitor_filters = esp32_exception_decoder

[env:esp32-c3]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600

lib_deps = 
    links2004/WebSockets@^2.4.1
    wasm3/Wasm3@^0.5.0

build_flags = 
    -DCORE_DEBUG_LEVEL=5
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    
board_build.arduino.cdc_on_boot = yes
board_build.partitions = default.csv
upload_port = /dev/cu.usbmodem21101
monitor_port = /dev/cu.usbmodem21101
monitor_filters = esp32_exception_decoder

; ALWAYS erase flash before uploading
extra_scripts = pre:erase_flash.py
